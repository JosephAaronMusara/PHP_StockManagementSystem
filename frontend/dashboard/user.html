<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User-Stock Management</title>
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <div class="sidenav">
      <a href="#stock-management" onclick="showSection('stock-management')">Stock Management</a>
      <a href="#alerts" onclick="showSection('alerts')">Alerts</a>
      <a href="#purchase-orders" onclick="showSection('purchase-orders')">Purchase Orders</a>
      <a href="#sales" onclick="showSection('sales')">Sales</a>
      <a href="#suppliers" onclick="showSection('suppliers')">Suppliers</a>
      <a href="#transactions" onclick="showSection('transactions')">Transactions</a>
      <a href="#settings" onclick="showSection('settings')">Settings</a>
    </div>

    <div class="dashboard-container">
      <header class="dashboard-header">
        <h1>User Stock Management</h1>
        <div class="user-info">
          <span>Welcome, [LoggedIn User]</span>
          <a href="../../api/accounts/logout.php">Logout</a>
        </div>
      </header>

      <main class="dashboard-content">
        <!-- Stock Management -->
        <section id="stock-management" class="section active">
          <h2>Manage Stock</h2>
          <button id="addStockButton" class="button">Add New Stock</button>
          <table class="stock-table">
            <thead>
              <tr>
                <th>Item Name</th>
                <th>Category</th>
                <th>Quantity</th>
                <th>Purchase Price</th>
                <th>Selling Price</th>
                <th>Supplier</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="stockTableBody">
              <!-- .................... -->
            </tbody>
          </table>
        </section>

        <!-- Alerts -->
        <section id="alerts" class="section">
          <h2>Alerts</h2>
          <table class="alerts-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Alert Type</th>
                <th>Item Name</th>
                <th>Message</th>
                <!-- Alerts are read only. I want them to be auto generated by the system -->
                <!-- <th>Actions</th> -->
              </tr>
            </thead>
            <tbody id="supplierTableBody">
              <!-- .................... -->
            </tbody>
          </table>
        </section>

        <!-- Purchase Orders -->
        <section id="purchase-orders" class="section">
          <h2>Purchase Orders</h2>
          <button id="addPOrderButton" class="button">Record New Sale</button>
          <table class="porder-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Supplier</th>
                <th>Item Name</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total Amount</th>
                <th>Time Received</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="porderTableBody">
              <!-- .................... -->
            </tbody>
          </table>
        </section>

        <!-- Sales -->
        <section id="sales" class="section">
          <h2>Manage Sales</h2>
          <button id="addSaleButton" class="button">Record New Sale</button>
          <table class="sales-table">
            <thead>
              <tr>
                <th>User</th>
                <th>Item Name</th>
                <th>Quantity</th>
                <th>Unit Price</th>
                <th>Total Amount</th>
                <th>Time of Sale</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="salesTableBody">
              <!-- .................... -->
            </tbody>
          </table>
        </section>

        <!-- Suppliers -->
        <section id="suppliers" class="section">
          <h2>Manage Suppliers</h2>
          <button id="addSupplierButton" class="button">
            Add New Supplier
          </button>
          <table class="supplier-table">
            <thead>
              <tr>
                <th>Supplier Name</th>
                <th>Contact Information</th>
                <th>Postal Address</th>
                <th>Registration Time</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody id="supplierTableBody">
              <!-- .................... -->
            </tbody>
          </table>
        </section>

        <!-- Transactions -->
        <section id="transactions" class="section">
          <h2>Manage Transactions</h2>
          <!-- <button id="addTransactionButton" class="button">Add New Stock</button> -->
          <!-- I dont see the reason to manipulate transaction lol. For data integrity -->
          <table class="transactions-table">
            <thead>
              <tr>
                <th>Type</th>
                <th>Item Name</th>
                <th>User</th>
                <th>Quantity</th>
                <th>Transaction Time</th>
              </tr>
            </thead>
            <tbody id="transactionTableBody">
              <!-- .................... -->
            </tbody>
          </table>
        </section>

        <!-- Settings -->
        <section id="settings" class="section">
          <h2>Settings</h2>

          <!-- User Details Form -->
          <div class="settings-section">
            <h3>Update User Details</h3>
            <form id="userDetailsForm">
              <label for="userName">Name:</label>
              <input
                type="text"
                id="userName"
                name="name"
                placeholder="Your Name"
                required
              />

              <label for="userEmail">Email:</label>
              <input
                type="email"
                id="userEmail"
                name="email"
                placeholder="Your Email"
                required
              />

              <label for="userPassword">Password:</label>
              <input
                type="password"
                id="userPassword"
                name="password"
                placeholder="New Password"
              />

              <button type="submit" class="button">Update Details</button>
            </form>
          </div>

          <!-- Theme -->
          <div class="settings-section">
            <h3>Change Theme</h3>
            <label for="themeSelect">Select Theme:</label>
            <select id="themeSelect">
              <option value="light">Light</option>
              <option value="dark">Dark</option>
            </select>
            <button id="applyThemeButton" class="button">Apply Theme</button>
          </div>
        </section>
      </main>
    </div>

    <div id="stockModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modalTitle">Add New Stock</h2>
        <form id="stockForm">
          <input type="hidden" id="stockId" />
          <input type="text" id="itemName" name="name" placeholder="Item Name" required/>
          <select name="category_id" id="category" style="padding: 5px; width: calc(100% - 20px)">
            <option value="1">EHE</option>
            <option value="2">hezvo</option>
            <option value="3">zvakadaro</option>
          </select>
          <input type="number" name="quantity" id="quantity" placeholder="Quantity" required/>
          <input type="number" name="purchase_price" id="purchasePrice" placeholder="Purchase Price" required/>
          <input type="number" name="selling_price" id="sellingPrice" placeholder="Selling Price" required/>
          <input type="text" id="supplier" name="supplier_id" placeholder="Supplier" required/>
          <button id="submitBtn" type="submit" class="button">Save Stock</button>
        </form>
      </div>
    </div>

    <div id="porderModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modalTitle">Add New Purchase</h2>
        <form id="porderForm">
          <input type="hidden" id="porderId" />
          <input type="hidden" id="userId" />
          <select name="supplier" id="supplier" style="padding: 5px; width: calc(100% - 20px)">
            <option value="1">EHE</option>
            <option value="2">hezvo</option>
            <option value="3">zvakadaro</option>
          </select>
          <select name="itemName" id="itemName" style="padding: 5px; width: calc(100% - 20px)">
            <option value="1">EHE</option>
            <option value="2">hezvo</option>
            <option value="3">zvakadaro</option>
          </select>           
          <input type="number" name="quantity" id="quantity" placeholder="Quantity" required/>
          <input type="number" name="unit_price" id="unitPrice" placeholder="Unit Price" required/>
          <input type="number" name="total_amount" id="totalAmount" placeholder="Total Amount" required/>
          <input type="text" id="time_received" name="time_received" placeholder="Time Received" required/>
          <button id="submitBtn" type="submit" class="button">Save Purchase Order</button>
        </form>
      </div>
    </div>

    <div id="salesModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modalTitle">Add New Sale</h2>
        <form id="salesForm">
          <input type="hidden" id="salesId" />
          <input type="hidden" id="userId" />
          <select name="itemName" id="itemName" style="padding: 5px; width: calc(100% - 20px)">
            <option value="1">EHE</option>
            <option value="2">hezvo</option>
            <option value="3">zvakadaro</option>
          </select>          
          <input type="number" name="quantity" id="quantity" placeholder="Quantity" required/>
          <input type="number" name="unit_price" id="unitPrice" placeholder="Unit Price" required/>
          <input type="number" name="total_amount" id="totalAmount" placeholder="Total Amount" required/>
          <button id="submitBtn" type="submit" class="button">Save Purchase Order</button>
        </form>
      </div>
    </div>

    <div id="suppilerModal" class="modal" style="display: none">
      <div class="modal-content">
        <span class="close-button">&times;</span>
        <h2 id="modalTitle">Add New Supplier</h2>
        <form id="supplierForm">
          <input type="hidden" id="supplierId" />
          <input type="text" id="itemName" name="name" placeholder="Item Name" required/>
          <input type="text" name="contact_info" id="contact_info" placeholder="Contact Information" required/>
          <input type="text" name="postal_address" id="postal_address" placeholder="Postal Address" required/>
          <button id="submitBtn" type="submit" class="button">Save Stock</button>
        </form>
      </div>
    </div>

    <script src="../js/userscript.js"></script>
    <script src="../js/usersettings.js"></script>
    <script>
      // sec js
      function showSection(sectionId) {
        const sections = document.querySelectorAll(".section");
        sections.forEach((section) => {
          section.classList.remove("active");
        });
        document.getElementById(sectionId).classList.add("active");
      }
    </script>
  </body>
</html>
